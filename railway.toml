# Railway configuration for Strapi
[build]
builder = "nixpacks"
command = "npm run build"
watchPatterns = ["src/**/*"]

[build.environment]
NODE_ENV = "production"
NPM_CONFIG_PRODUCTION = "false"

[build.install]
  [build.install.npm]
    includeDevDependencies = true
    nodeVersion = "20"
    cache = true

[deploy]
startCommand = "npm run start"

# ============================================
# REQUIRED ENVIRONMENT VARIABLES
# ============================================
# Set these in your Railway project settings:
#
# NODE_ENV=production
# DATABASE_URL=your_railway_postgres_url?sslmode=require
# ADMIN_JWT_SECRET=your_random_string_here
# JWT_SECRET=your_random_string_here
# API_TOKEN_SALT=your_random_string_here
# TRANSFER_TOKEN_SALT=your_random_string_here
# ENCRYPTION_KEY=your_random_string_here
# APP_KEYS=key1,key2,key3,key4
